.flex-grid {
  display: flex;
  flex-wrap: wrap;
  width: 100%;

  [class*='col-'] {
    &:not(:last-child) {
      margin-right: $gutter-horizontal;
    }
  }

  .col {
    flex: 1;
    // 4 Column Grid
    &-1-of-4 {
      width: calc((100% - (3 * #{$gutter-horizontal})) * (1 / 4));
    }
    &-2-of-4 {
      width: calc((100% - (3 * #{$gutter-horizontal})) * (1 / 2));
    }
    &-3-of-4 {
      width: calc((100% - (3 * #{$gutter-horizontal})) * (3 / 4));
    }

    // 3 Column Grid
    &-1-of-3 {
      width: calc((100% - (2 * #{$gutter-horizontal})) * (1 / 3));
    }
    &-2-of-3 {
      width: calc((100% - (1 * #{$gutter-horizontal})) * (2 / 3));
    }

    // 2 Column Grid
    &-1-of-2 {
      width: calc((100% - (1 * #{$gutter-horizontal})) * (1 / 2));
    }

    // Offsets for columns
    &--offset-1-of-4 {
      margin-left: calc(
        (100% - (3 * #{$gutter-horizontal})) * (1 / 4)
      );
    }
    &--offset-2-of-4 {
      margin-left: calc(
        (100% - (3 * #{$gutter-horizontal})) * (1 / 2)
      );
    }
    &--offset-3-of-4 {
      margin-left: calc(
        (100% - (3 * #{$gutter-horizontal})) * (3 / 4)
      );
    }
    &--offset-1-of-3 {
      margin-left: calc(
        (100% - (2 * #{$gutter-horizontal})) * (1 / 3)
      );
    }
    &--offset-2-of-3 {
      margin-left: calc(
        (100% - (1 * #{$gutter-horizontal})) * (2 / 3)
      );
    }
    &--offset-1-of-2 {
      margin-left: calc(
        (100% - (1 * #{$gutter-horizontal})) * (1 / 2)
      );
    }
  }
}

@media (max-width: 670px) {
  .flex-grid {
    [class*='col-']:not(.sm-1-of-2),
    [class*='col-']:not(:last-child):not(.sm-1-of-2),
    [class*='col-']:last-child:not(.sm-1-of-2) {
      width: 100%;
      margin-bottom: 0;
      margin-right: 0;
    }
    .sm-1-of-2 {
      width: calc((100% - (1 * #{$gutter-horizontal})) * (1 / 2));
    }
    .sm-1-of-2:not(:last-child) {
      margin-right: $gutter-horizontal;
    }
  }
}
